import { cookies } from "next/headers"

const defaultLocale = "en"
const locales = ["en", "ar"]

// Import messages statically to avoid dynamic import issues
const messages = {
  en: {
    common: {
      hello: "Hello",
      loading: "Loading...",
      error: "Error",
      success: "Success",
      cancel: "Cancel",
      save: "Save",
      delete: "Delete",
      edit: "Edit",
      add: "Add",
      remove: "Remove",
      search: "Search",
      filter: "Filter",
      sort: "Sort",
      price: "Price",
      quantity: "Quantity",
      total: "Total",
      subtotal: "Subtotal",
      tax: "Tax",
      shipping: "Shipping",
      discount: "Discount",
      toggleTheme: "Toggle theme",
      changeLanguage: "Change language",
    },
    navigation: {
      home: "Home",
      products: "Products",
      categories: "Categories",
      about: "About",
      contact: "Contact",
      cart: "Cart",
      account: "Account",
      myAccount: "My Account",
      orderHistory: "Order History",
      wishlist: "Wishlist",
      menu: "Menu",
    },
    auth: {
      login: "Login",
      register: "Register",
      logout: "Logout",
      email: "Email",
      password: "Password",
      confirmPassword: "Confirm Password",
      firstName: "First Name",
      lastName: "Last Name",
      fullName: "Full Name",
      forgotPassword: "Forgot Password?",
      rememberMe: "Remember me",
      createAccount: "Create Account",
      alreadyHaveAccount: "Already have an account?",
      dontHaveAccount: "Don't have an account?",
      signIn: "Sign in",
      signUp: "Sign up",
    },
    product: {
      addToCart: "Add to Cart",
      buyNow: "Buy Now",
      outOfStock: "Out of Stock",
      inStock: "In Stock",
      lowStock: "Only {count} left!",
      sku: "SKU",
      category: "Category",
      tags: "Tags",
      description: "Description",
      specifications: "Specifications",
      reviews: "Reviews",
      relatedProducts: "Related Products",
      comparePrice: "Compare at",
      sale: "Sale",
      new: "New",
      featured: "Featured",
      recommendedForYou: "Recommended for You",
    },
    cart: {
      title: "Shopping Cart",
      empty: "Your cart is empty",
      emptyDescription: "Add some products to get started",
      continueShopping: "Continue Shopping",
      proceedToCheckout: "Proceed to Checkout",
      updateCart: "Update Cart",
      removeItem: "Remove Item",
      clearCart: "Clear Cart",
      itemAdded: "Item added to cart",
      itemRemoved: "Item removed from cart",
      itemUpdated: "Cart updated",
    },
    checkout: {
      title: "Checkout",
      contactInformation: "Contact Information",
      shippingAddress: "Shipping Address",
      billingAddress: "Billing Address",
      paymentMethod: "Payment Method",
      orderSummary: "Order Summary",
      placeOrder: "Place Order",
      processing: "Processing...",
      orderPlaced: "Order placed successfully!",
      orderConfirmation: "You will receive a confirmation email shortly.",
    },
    search: {
      placeholder: "Search products...",
      suggestions: "Suggestions",
      products: "Products",
      noResults: "No results found",
      viewAll: "View all {count} results",
    },
    filters: {
      priceRange: "Price Range",
      categories: "Categories",
      brands: "Brands",
      rating: "Rating",
      availability: "Availability",
      applyFilters: "Apply Filters",
      clearFilters: "Clear Filters",
    },
    admin: {
      dashboard: "Dashboard",
      products: "Products",
      orders: "Orders",
      customers: "Customers",
      analytics: "Analytics",
      settings: "Settings",
      totalRevenue: "Total Revenue",
      totalOrders: "Total Orders",
      totalProducts: "Total Products",
      totalCustomers: "Total Customers",
    },
  },
  ar: {
    common: {
      hello: "مرحباً",
      loading: "جاري التحميل...",
      error: "خطأ",
      success: "نجح",
      cancel: "إلغاء",
      save: "حفظ",
      delete: "حذف",
      edit: "تعديل",
      add: "إضافة",
      remove: "إزالة",
      search: "بحث",
      filter: "تصفية",
      sort: "ترتيب",
      price: "السعر",
      quantity: "الكمية",
      total: "المجموع",
      subtotal: "المجموع الفرعي",
      tax: "الضريبة",
      shipping: "الشحن",
      discount: "الخصم",
      toggleTheme: "تبديل المظهر",
      changeLanguage: "تغيير اللغة",
    },
    navigation: {
      home: "الرئيسية",
      products: "المنتجات",
      categories: "الفئات",
      about: "حولنا",
      contact: "اتصل بنا",
      cart: "السلة",
      account: "الحساب",
      myAccount: "حسابي",
      orderHistory: "تاريخ الطلبات",
      wishlist: "قائمة الأمنيات",
      menu: "القائمة",
    },
    auth: {
      login: "تسجيل الدخول",
      register: "إنشاء حساب",
      logout: "تسجيل الخروج",
      email: "البريد الإلكتروني",
      password: "كلمة المرور",
      confirmPassword: "تأكيد كلمة المرور",
      firstName: "الاسم الأول",
      lastName: "اسم العائلة",
      fullName: "الاسم الكامل",
      forgotPassword: "نسيت كلمة المرور؟",
      rememberMe: "تذكرني",
      createAccount: "إنشاء حساب",
      alreadyHaveAccount: "لديك حساب بالفعل؟",
      dontHaveAccount: "ليس لديك حساب؟",
      signIn: "تسجيل الدخول",
      signUp: "إنشاء حساب",
    },
    product: {
      addToCart: "أضف إلى السلة",
      buyNow: "اشتري الآن",
      outOfStock: "نفد من المخزون",
      inStock: "متوفر",
      lowStock: "متبقي {count} فقط!",
      sku: "رمز المنتج",
      category: "الفئة",
      tags: "العلامات",
      description: "الوصف",
      specifications: "المواصفات",
      reviews: "التقييمات",
      relatedProducts: "منتجات ذات صلة",
      comparePrice: "قارن بسعر",
      sale: "تخفيض",
      new: "جديد",
      featured: "مميز",
      recommendedForYou: "موصى لك",
    },
    cart: {
      title: "سلة التسوق",
      empty: "سلة التسوق فارغة",
      emptyDescription: "أضف بعض المنتجات للبدء",
      continueShopping: "متابعة التسوق",
      proceedToCheckout: "المتابعة للدفع",
      updateCart: "تحديث السلة",
      removeItem: "إزالة العنصر",
      clearCart: "إفراغ السلة",
      itemAdded: "تم إضافة العنصر إلى السلة",
      itemRemoved: "تم إزالة العنصر من السلة",
      itemUpdated: "تم تحديث السلة",
    },
    checkout: {
      title: "الدفع",
      contactInformation: "معلومات الاتصال",
      shippingAddress: "عنوان الشحن",
      billingAddress: "عنوان الفواتير",
      paymentMethod: "طريقة الدفع",
      orderSummary: "ملخص الطلب",
      placeOrder: "تأكيد الطلب",
      processing: "جاري المعالجة...",
      orderPlaced: "تم تأكيد الطلب بنجاح!",
      orderConfirmation: "ستتلقى رسالة تأكيد قريباً.",
    },
    search: {
      placeholder: "البحث عن المنتجات...",
      suggestions: "اقتراحات",
      products: "المنتجات",
      noResults: "لم يتم العثور على نتائج",
      viewAll: "عرض جميع النتائج ({count})",
    },
    filters: {
      priceRange: "نطاق السعر",
      categories: "الفئات",
      brands: "العلامات التجارية",
      rating: "التقييم",
      availability: "التوفر",
      applyFilters: "تطبيق المرشحات",
      clearFilters: "مسح المرشحات",
    },
    admin: {
      dashboard: "لوحة التحكم",
      products: "المنتجات",
      orders: "الطلبات",
      customers: "العملاء",
      analytics: "التحليلات",
      settings: "الإعدادات",
      totalRevenue: "إجمالي الإيرادات",
      totalOrders: "إجمالي الطلبات",
      totalProducts: "إجمالي المنتجات",
      totalCustomers: "إجمالي العملاء",
    },
  },
}

export async function getMessages(locale: string) {
  try {
    return messages[locale as keyof typeof messages] || messages[defaultLocale]
  } catch (error) {
    console.warn(`Failed to load messages for locale: ${locale}`)
    return messages[defaultLocale]
  }
}

export function getLocale(): string {
  try {
    const cookieStore = cookies()
    const localeCookie = cookieStore.get("locale")

    if (localeCookie && locales.includes(localeCookie.value)) {
      return localeCookie.value
    }
  } catch (error) {
    // Handle cases where cookies() is not available (client-side)
    console.warn("Could not access cookies for locale detection")
  }

  return defaultLocale
}

export { defaultLocale, locales }
